@model h37.Models.ViewModels.ProjectEditViewModel
@{
    ViewBag.Title = "Edit";
}

<h2 id="haus2">Project Name: @Html.DisplayFor(x => Model.projectName)</h2>
<section id="fileList" class="editor-left">
    <div class="row">
        <h3 id="haus2">File list</h3>
        <hr />
        @foreach (var item in Model.fileList)
        {
            <div class="col-xs-4 project table-bordered">
                <h4 class="to-left">Name: @Html.DisplayFor(x => item.fileName)</h4>
                <div class="to-right">
                    @Html.ActionLink("Edit", "EditFile", "Project", new { projectID = item.projectID, fileID = item.fileID }, new { @class = "btn btn-primary" })
                    @Html.ActionLink("Delete", "DeleteFile", "Project", new { fileID = item.fileID }, new { @class = "btn btn-danger" })
                </div>
            </div>
        }
        <div class="col-xs-4 project table-bordered">
            @using (Html.BeginForm("CreateFile", "Project"))
            {
                <h4>Create new File</h4>
                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                <div class="form-group">
                    @Html.LabelFor(m => m.createFile.fileName, "", new { @class = "col-md-2 control-label" })
                    <div class="col-md-10">
                        <input class="form-control" id="fileName" name="fileName" placeholder="FILE NAME" type="text" value="">
                        @Html.ValidationMessageFor(m => m.createFile.fileName, "", new { @class = "text-danger" })
                    </div>
                </div>
                <div class="form-group">
                    @Html.HiddenFor(m => m.projectID, new { projectID = Model.projectID })
                </div>
                <div class="form-group">
                    <div class="col-md-offset-2 col-md-10">
                        <input type="submit" value="Create" class="btn btn-success" />
                    </div>
                </div>
            }
        </div>
    </div>
</section>

<div class="border-carrier">
</div>

<!--This is the div for the ace editor-->
<div class="editor-right">
    <h3 id="haus2">Project Name: @Html.DisplayFor(x => Model.eventList[0].fileName) (work in progress)</h3>
    <hr />
    <div id="editor">
        @ViewBag.code
    </div>
</div>

<!--This is a script for the ace editor-->
@section scripts
{
    <script src="~/3rdParty/src/ace.js" type="text/javascript" charset="utf-8"></script>
    <script>
        var editor = ace.edit("editor");
        editor.setTheme("ace/theme/monokai");
        editor.getSession().setMode("ace/mode/javascript");
    </script>
}

<div class="editor-right">
    <section id="eventLog">
        <h2>Event log</h2>
        <div class="row">
            <div class="col-xs-3">
                Time
            </div>
            <div class="col-xs-3">
                User
            </div>
            <div class="col-xs-3">
                Type
            </div>
            <div class="col-xs-3">
                File
            </div>
        </div>
        @foreach (var item in Model.eventList)
        {
            <div class="row">
                <div class="col-xs-3">
                    @Html.DisplayFor(x => item.timestamp)
                </div>
                <div class="col-xs-3">
                    @Html.DisplayFor(x => item.userName)
                </div>
                <div class="col-xs-3">
                    @Html.DisplayFor(x => item.type)
                </div>
                <div class="col-xs-3">
                    @Html.DisplayFor(x => item.fileName)
                </div>
            </div>
        }
    </section>
</div>